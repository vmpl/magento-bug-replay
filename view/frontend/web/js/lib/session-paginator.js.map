{"version":3,"file":"session-paginator.js","names":["_default","loadingItems","page","size","items","_proto","prototype","getCurrentPage","_this","offset","limit","length","leftChunk","slice","rightChunk","then","concat","Promise","resolve","goPage","Error","goNext","goPrevious"],"sources":["../../ts/js/lib/session-paginator.ts"],"sourcesContent":["import {RecordSession} from \"VMPL_BugReplay/js/api/session\";\n\nexport default class {\n    protected page: number = 1;\n    protected size: number = 20;\n    protected items: RecordSession[] = [];\n\n    constructor(\n        protected readonly loadingItems: (offset: number, limit: number) => Promise<RecordSession[]>,\n    ) {\n    }\n\n\n    getCurrentPage(): Promise<RecordSession[]> {\n        const offset = (this.page - 1) * this.size;\n        const limit = this.size;\n\n        if (offset >= this.items.length) {\n            const leftChunk = this.items.slice(0, offset);\n            const rightChunk = this.items.slice(offset + limit);\n            return this.loadingItems(offset, limit).then(items => {\n                this.items = [].concat(leftChunk, items, rightChunk);\n                return items;\n            })\n        }\n\n        return Promise.resolve(this.items.slice(offset, limit));\n    }\n\n    goPage(page: number) {\n        if (!(page > 0)) {\n            throw new Error('Page cannot be lower then 1.');\n        }\n\n        this.page = page;\n    }\n\n    goNext() {\n        this.goPage(this.page + 1);\n    }\n\n    goPrevious() {\n        if (this.page !== 1) {\n            this.goPage(this.page - 1);\n        }\n    }\n}\n"],"mappings":";;;;;;IAOI,SAAAA,SACuBC,YAAyE,EAC9F;MAAA,KANQC,IAAI,GAAW,CAAC;MAAA,KAChBC,IAAI,GAAW,EAAE;MAAA,KACjBC,KAAK,GAAoB,EAAE;MAAA,KAGdH,YAAyE,GAAzEA,YAAyE;IAEhG;IAAC,IAAAI,MAAA,GAAAL,QAAA,CAAAM,SAAA;IAAAD,MAAA,CAGDE,cAAc,GAAd,SAAAA,eAAA,EAA2C;MAAA,IAAAC,KAAA;MACvC,IAAMC,MAAM,GAAG,CAAC,IAAI,CAACP,IAAI,GAAG,CAAC,IAAI,IAAI,CAACC,IAAI;MAC1C,IAAMO,KAAK,GAAG,IAAI,CAACP,IAAI;MAEvB,IAAIM,MAAM,IAAI,IAAI,CAACL,KAAK,CAACO,MAAM,EAAE;QAC7B,IAAMC,SAAS,GAAG,IAAI,CAACR,KAAK,CAACS,KAAK,CAAC,CAAC,EAAEJ,MAAM,CAAC;QAC7C,IAAMK,UAAU,GAAG,IAAI,CAACV,KAAK,CAACS,KAAK,CAACJ,MAAM,GAAGC,KAAK,CAAC;QACnD,OAAO,IAAI,CAACT,YAAY,CAACQ,MAAM,EAAEC,KAAK,CAAC,CAACK,IAAI,CAAC,UAAAX,KAAK,EAAI;UAClDI,KAAI,CAACJ,KAAK,GAAG,EAAE,CAACY,MAAM,CAACJ,SAAS,EAAER,KAAK,EAAEU,UAAU,CAAC;UACpD,OAAOV,KAAK;QAChB,CAAC,CAAC;MACN;MAEA,OAAOa,OAAO,CAACC,OAAO,CAAC,IAAI,CAACd,KAAK,CAACS,KAAK,CAACJ,MAAM,EAAEC,KAAK,CAAC,CAAC;IAC3D,CAAC;IAAAL,MAAA,CAEDc,MAAM,GAAN,SAAAA,OAAOjB,IAAY,EAAE;MACjB,IAAI,EAAEA,IAAI,GAAG,CAAC,CAAC,EAAE;QACb,MAAM,IAAIkB,KAAK,CAAC,8BAA8B,CAAC;MACnD;MAEA,IAAI,CAAClB,IAAI,GAAGA,IAAI;IACpB,CAAC;IAAAG,MAAA,CAEDgB,MAAM,GAAN,SAAAA,OAAA,EAAS;MACL,IAAI,CAACF,MAAM,CAAC,IAAI,CAACjB,IAAI,GAAG,CAAC,CAAC;IAC9B,CAAC;IAAAG,MAAA,CAEDiB,UAAU,GAAV,SAAAA,WAAA,EAAa;MACT,IAAI,IAAI,CAACpB,IAAI,KAAK,CAAC,EAAE;QACjB,IAAI,CAACiB,MAAM,CAAC,IAAI,CAACjB,IAAI,GAAG,CAAC,CAAC;MAC9B;IACJ,CAAC;IAAA,OAAAF,QAAA;EAAA;EAAA,OAAAA,QAAA;AAAA"}