{"version":3,"file":"converter.js","names":["Converter","classToObject","data","Array","Promise","all","map","bind","Object","Function","resolve","values","then","convertedObject","keys","key","index","fromEntries","objectToClass","_this","it","hasOwnProperty","_data$$$classModule$s","split","ModuleClass","LoadedClass","require","modules","module","assign"],"sources":["../../../ts/js/lib/worker/converter.ts"],"sourcesContent":["export default class Converter {\n    protected constructor() {\n    }\n\n    static classToObject(data: any): Promise<any> {\n        switch (true) {\n            case data instanceof Array:\n                return Promise.all(data.map(this.classToObject.bind(this)));\n            case data instanceof Object:\n                if (data['$$serialize'] instanceof Function) {\n                    return Promise.resolve(data['$$serialize']());\n                }\n\n                return Promise.all(Object.values(data).map(this.classToObject.bind(this)))\n                    .then(values => {\n                        let convertedObject = Object.keys(data)\n                            .map((key, index) => [key, values[index]])\n                        return Object.fromEntries(convertedObject);\n                    })\n            default:\n                return Promise.resolve(data);\n        }\n    }\n\n    static objectToClass(data: any): Promise<any> {\n        switch (true) {\n            case data instanceof Array:\n                return Promise.all(data.map(this.objectToClass.bind(this)));\n            case data instanceof Object:\n                return Promise.all(Object.values(data).map(it => this.objectToClass(it)))\n                    .then(values => {\n                        let convertedObject = Object.keys(data)\n                            .map((key, index) => [key, values[index]])\n                        convertedObject = Object.fromEntries(convertedObject);\n\n                        if (data.hasOwnProperty('$$classModule')) {\n                            const [ModuleClass, LoadedClass] = data['$$classModule'].split(';');\n                            return new Promise(resolve => {\n                                require([ModuleClass], function (modules: any) {\n                                    if (modules[LoadedClass]['$$deserialize'] instanceof Function) {\n                                        resolve(modules[LoadedClass]['$$deserialize'](convertedObject));\n                                    } else {\n                                        const module = new modules[LoadedClass]();\n                                        resolve(Object.assign(module, convertedObject));\n                                    }\n                                })\n                            });\n                        }\n\n                        return convertedObject;\n                    })\n            default:\n                return Promise.resolve(data);\n        }\n    }\n}\n"],"mappings":"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"}