{"version":3,"file":"converter.js","names":["Converter","classToObject","data","Blob","Promise","resolve","Array","all","map","bind","Object","Function","values","then","convertedObject","keys","key","index","fromEntries","objectToClass","_this","it","hasOwnProperty","_data$$$classModule$s","split","ModuleClass","RequiredClass","require","modules","loadedClass","assign"],"sources":["../../../ts/js/lib/worker/converter.ts"],"sourcesContent":["export default class Converter {\n    protected constructor() {\n    }\n\n    static classToObject(data: any): Promise<any> {\n        switch (true) {\n            case data instanceof Blob:\n                return Promise.resolve(data);\n            case data instanceof Array:\n                return Promise.all(data.map(this.classToObject.bind(this)));\n            case data instanceof Object:\n                if (data['$$serialize'] instanceof Function) {\n                    return Promise.resolve(data['$$serialize']());\n                }\n\n                return Promise.all(Object.values(data).map(this.classToObject.bind(this)))\n                    .then(values => {\n                        let convertedObject = Object.keys(data)\n                            .map((key, index) => [key, values[index]])\n                        return Object.fromEntries(convertedObject);\n                    })\n            default:\n                return Promise.resolve(data);\n        }\n    }\n\n    static objectToClass(data: any): Promise<any> {\n        switch (true) {\n            case data instanceof Blob:\n                return Promise.resolve(data);\n            case data instanceof Array:\n                return Promise.all(data.map(this.objectToClass.bind(this)));\n            case data instanceof Object:\n                return Promise.all(Object.values(data).map(it => this.objectToClass(it)))\n                    .then(values => {\n                        let convertedObject = Object.keys(data)\n                            .map((key, index) => [key, values[index]])\n                        convertedObject = Object.fromEntries(convertedObject);\n\n                        if (data.hasOwnProperty('$$classModule')) {\n                            const [ModuleClass, RequiredClass] = data['$$classModule'].split(';');\n                            return new Promise(resolve => {\n                                require([ModuleClass], function (modules: any) {\n                                    const loadedClass = modules[RequiredClass];\n                                    if (loadedClass['$$deserialize'] instanceof Function) {\n                                        resolve(loadedClass['$$deserialize'](convertedObject));\n                                    } else {\n                                        resolve(Object.assign(new loadedClass(), convertedObject));\n                                    }\n                                })\n                            });\n                        }\n\n                        return convertedObject;\n                    })\n            default:\n                return Promise.resolve(data);\n        }\n    }\n}\n"],"mappings":"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"}