{"version":3,"file":"decorator.js","names":["WorkerArgument","module","target","className","name","startsWith","Object","getPrototypeOf","_target","_inheritsLoose","_class2","_this","_len","arguments","length","args","Array","_key","call","apply","concat","$$classModule","WorkerSerializable","serializer","_target2","_class3","_proto","prototype","$$serialize","fromEntries","entries","map","_ref","property","value","Function","hasOwnProperty","_serializer$property","serialize","filter","it","$$deserialize","data","deserializeObject","_ref2","_serializer$property2","deserialize","assign"],"sources":["../../../ts/js/lib/worker/decorator.ts"],"sourcesContent":["export function WorkerArgument(module: string) {\n    return function <T extends { new(...args: any[]): {} }>(target: T) {\n        const className = target.name.startsWith('_class') ? Object.getPrototypeOf(target).name : target.name;\n        return class extends target {\n            $$classModule: string = `${module};${className}`;\n        };\n    }\n}\n\nexport function WorkerSerializable(serializer: { [property: string]: [Function, Function] }) {\n    return function <T extends { new(...args: any[]): {} }>(target: T) {\n        return class extends target {\n            $$serialize(): Object {\n                return Object.fromEntries(Object.entries(this)\n                    .map(([property, value]) => {\n                        if (value instanceof Function) {\n                            return null;\n                        }\n\n                        if (!serializer.hasOwnProperty(property)) {\n                            return [property, value];\n                        }\n\n                        const [serialize] = serializer[property];\n                        return [property, serialize(value)];\n                    }).filter(it => it !== null))\n            }\n\n            static $$deserialize(data: Object) {\n                const deserializeObject: Object = Object.fromEntries(Object.entries(data)\n                    .map(([property, value]) => {\n                        if (!serializer.hasOwnProperty(property)) {\n                            return [property, value];\n                        }\n\n                        const [serialize, deserialize] = serializer[property];\n                        return [property, deserialize(value)];\n                    }));\n\n                return Object.assign((new this), deserializeObject);\n            }\n        };\n    }\n}\n"],"mappings":"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"}