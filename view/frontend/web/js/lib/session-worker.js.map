{"version":3,"file":"session-worker.js","names":["SessionDataBase","_dexie2","_inheritsLoose","databaseName","_this","call","version","stores","events","_proto","prototype","post","record","put","_dexie","SessionWorker","_proto2","initInstance","instance","database","Promise","resolve","sayHello","console","log","expose"],"sources":["../../ts/js/lib/session-worker.ts"],"sourcesContent":["import {expose} from \"threads\";\nimport Dexie from \"dexie\";\n\nexport interface RecordEvent {\n    timestamp: number,\n    type: number,\n    data: Object,\n}\n\nclass SessionDataBase extends Dexie {\n    events!: Dexie.Table<RecordEvent, number>;\n\n    constructor(databaseName: string) {\n        super(databaseName);\n        this.version(1).stores({\n            events: 'timestamp,type,data',\n        });\n    }\n\n    post(record: RecordEvent): Promise<RecordEvent> {\n        return this.events.put(record);\n    }\n}\n\nexport default class SessionWorker {\n    protected database: Dexie;\n    initInstance(instance: string): Promise<any> {\n        this.database = new SessionDataBase(instance);\n        return Promise.resolve();\n    }\n    sayHello(): Promise<any> {\n        console.log('Hello World!');\n        return Promise.resolve();\n    }\n}\n\nexpose(SessionWorker);\n"],"mappings":";;;;;MASMA,eAAe,0BAAAC,OAAA;IAAA;;IAAAC,cAAA,CAAAF,eAAA,EAAAC,OAAA;IAGjB,SAAAD,gBAAYG,YAAoB,EAAE;MAAA,IAAAC,KAAA;MAC9BA,KAAA,GAAAH,OAAA,CAAAI,IAAA,OAAMF,YAAY,CAAC;MACnBC,KAAA,CAAKE,OAAO,CAAC,CAAC,CAAC,CAACC,MAAM,CAAC;QACnBC,MAAM,EAAE;MACZ,CAAC,CAAC;MAAC,OAAAJ,KAAA;IACP;IAAC,IAAAK,MAAA,GAAAT,eAAA,CAAAU,SAAA;IAAAD,MAAA,CAEDE,IAAI,GAAJ,SAAAA,KAAKC,MAAmB,EAAwB;MAC5C,OAAO,IAAI,CAACJ,MAAM,CAACK,GAAG,CAACD,MAAM,CAAC;IAClC,CAAC;IAAA,OAAAZ,eAAA;EAAA,EAAAc,MAAA;EAAA,IAGgBC,aAAa;IAAA;;IAAA,SAAAA,cAAA;IAAA,IAAAC,OAAA,GAAAD,aAAA,CAAAL,SAAA;IAAAM,OAAA,CAE9BC,YAAY,GAAZ,SAAAA,aAAaC,QAAgB,EAAgB;MACzC,IAAI,CAACC,QAAQ,GAAG,IAAInB,eAAe,CAACkB,QAAQ,CAAC;MAC7C,OAAOE,OAAO,CAACC,OAAO,CAAC,CAAC;IAC5B,CAAC;IAAAL,OAAA,CACDM,QAAQ,GAAR,SAAAA,SAAA,EAAyB;MACrBC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAC3B,OAAOJ,OAAO,CAACC,OAAO,CAAC,CAAC;IAC5B,CAAC;IAAA,OAAAN,aAAA;EAAA;EAGL,IAAAU,eAAM,EAACV,aAAa,CAAC;EAAC,OAAAA,aAAA;AAAA"}