{"version":3,"file":"dialog-not-recorded-error.js","names":["_dialog","extend","defaults","template","confirmed","policyUrl","URL","location","origin","toString","content","title","message","close","recordEnable","elementConfig","class","_knockout","observable","imports","toggleEnabled","links","modules","toggle","initialize","options","_super","window","addEventListener","onError","bind","passive","initObservable","observe","event","show","_default"],"sources":["../../ts/js/view/dialog-not-recorded-error.ts"],"sourcesContent":["import Dialog from \"VMPL_BugReplay/js/view/dialog\";\nimport ko from \"knockout\";\n\nexport default Dialog.extend({\n    defaults: {\n        template: 'VMPL_BugReplay/dialog/not-recorded-error',\n        confirmed: false,\n        policyUrl: new URL(location.origin).toString(),\n        content: {\n            title: 'Error detected.',\n            message: 'Web session wasn\\'t recorded with given error, you can enable it bellow.',\n            close: 'Close',\n        },\n        recordEnable: false,\n        elementConfig: {\n            class: ko.observable<string>('message error left-bottom'),\n        },\n        imports: {\n            toggleEnabled: '${ $.provider }:configuration.enable_toggle',\n        },\n        links: {\n            recordEnable: '${ $.provider }:$recordEnable',\n        },\n        modules: {\n            toggle: 'vmpl_bug_replay_record_toggle.vmpl_bug_replay_record_toggle'\n        }\n    },\n    initialize(options: object) {\n        this._super(options);\n        window.addEventListener('error', this.onError.bind(this), {passive: true});\n        return this;\n    },\n    initObservable() {\n        this._super();\n        this.observe([\n            'recordEnable',\n        ]);\n        return this;\n    },\n    onError(event: ErrorEvent) {\n        this.show(this.recordEnable() === '0' && this.toggleEnabled === '1');\n    }\n})\n"],"mappings":";;;iBAGeA,OAAA,CAAOC,MAAM,CAAC;IACzBC,QAAQ,EAAE;MACNC,QAAQ,EAAE,0CAA0C;MACpDC,SAAS,EAAE,KAAK;MAChBC,SAAS,EAAE,IAAIC,GAAG,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,QAAQ,CAAC,CAAC;MAC9CC,OAAO,EAAE;QACLC,KAAK,EAAE,iBAAiB;QACxBC,OAAO,EAAE,0EAA0E;QACnFC,KAAK,EAAE;MACX,CAAC;MACDC,YAAY,EAAE,KAAK;MACnBC,aAAa,EAAE;QACXC,KAAK,EAAEC,SAAA,CAAGC,UAAU,CAAS,2BAA2B;MAC5D,CAAC;MACDC,OAAO,EAAE;QACLC,aAAa,EAAE;MACnB,CAAC;MACDC,KAAK,EAAE;QACHP,YAAY,EAAE;MAClB,CAAC;MACDQ,OAAO,EAAE;QACLC,MAAM,EAAE;MACZ;IACJ,CAAC;IACDC,UAAU,WAAAA,WAACC,OAAe,EAAE;MACxB,IAAI,CAACC,MAAM,CAACD,OAAO,CAAC;MACpBE,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,IAAI,CAAC,EAAE;QAACC,OAAO,EAAE;MAAI,CAAC,CAAC;MAC1E,OAAO,IAAI;IACf,CAAC;IACDC,cAAc,WAAAA,eAAA,EAAG;MACb,IAAI,CAACN,MAAM,CAAC,CAAC;MACb,IAAI,CAACO,OAAO,CAAC,CACT,cAAc,CACjB,CAAC;MACF,OAAO,IAAI;IACf,CAAC;IACDJ,OAAO,WAAAA,QAACK,KAAiB,EAAE;MACvB,IAAI,CAACC,IAAI,CAAC,IAAI,CAACrB,YAAY,CAAC,CAAC,KAAK,GAAG,IAAI,IAAI,CAACM,aAAa,KAAK,GAAG,CAAC;IACxE;EACJ,CAAC,CAAC;EAAA,OAAAgB,QAAA;AAAA"}