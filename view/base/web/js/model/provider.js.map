{"version":3,"file":"provider.js","names":["_default","_uiComponent","extend","defaults","ignoreTmpls","data","get","path","_super","set","value","Array","index","$$primary","Function","diffs","isTracked","_mageUtils","compare","_set","_notifyChanges","pathComponent","parent","pathComponents","split","lastPathComponent","pop","shift","_underscore","isObject","isFunction"],"sources":["../../ts/js/model/provider.ts"],"sourcesContent":["// @ts-ignore\nimport utils from 'mageUtils';\nimport _ from 'underscore';\nimport Component from 'uiComponent';\n\nexport default Component.extend({\n    defaults: {\n        ignoreTmpls: {\n            data: true\n        }\n    },\n    get(path: string) {\n        return this._super(path);\n    },\n    set(path: string, value: any) {\n        if (value instanceof Array) {\n            for (let index in value) {\n                this.set(`${path}.${index}`, value[index]);\n            }\n            return this;\n        }\n\n        // @docs prevents the loop of the same item\n        if (!(value.$$primary instanceof Function)) {\n            return this._super(path, value);\n        }\n\n        const data = this.get(path);\n        const diffs = !(data instanceof Function)\n            && !this.isTracked(data)\n            && data?.$$primary() !== value.$$primary()\n                ? utils.compare(data, value, path)\n                : false;\n        this._set(path ,value);\n\n        if (diffs) {\n            this._notifyChanges(diffs);\n        }\n\n        return this;\n    },\n    _set(path: string, value: any) {\n        let pathComponent, parent = this;\n        const pathComponents = path.split('.');\n        const lastPathComponent = pathComponents.pop();\n        while(pathComponent = pathComponents.shift()) {\n            if (!_.isObject(parent[pathComponent])) {\n                parent[pathComponent] = {};\n            }\n            parent = parent[pathComponent];\n        }\n        if (_.isFunction(parent[lastPathComponent])) {\n            parent[lastPathComponent](value);\n        } else {\n            parent[lastPathComponent] = value;\n        }\n    }\n})\n"],"mappings":";;;EAAA;EAAA,IAAAA,QAAA,GAKeC,YAAA,CAAUC,MAAM,CAAC;IAC5BC,QAAQ,EAAE;MACNC,WAAW,EAAE;QACTC,IAAI,EAAE;MACV;IACJ,CAAC;IACDC,GAAG,WAAAA,IAACC,IAAY,EAAE;MACd,OAAO,IAAI,CAACC,MAAM,CAACD,IAAI,CAAC;IAC5B,CAAC;IACDE,GAAG,WAAAA,IAACF,IAAY,EAAEG,KAAU,EAAE;MAC1B,IAAIA,KAAK,YAAYC,KAAK,EAAE;QACxB,KAAK,IAAIC,KAAK,IAAIF,KAAK,EAAE;UACrB,IAAI,CAACD,GAAG,CAAIF,IAAI,SAAIK,KAAK,EAAIF,KAAK,CAACE,KAAK,CAAC,CAAC;QAC9C;QACA,OAAO,IAAI;MACf;;MAEA;MACA,IAAI,EAAEF,KAAK,CAACG,SAAS,YAAYC,QAAQ,CAAC,EAAE;QACxC,OAAO,IAAI,CAACN,MAAM,CAACD,IAAI,EAAEG,KAAK,CAAC;MACnC;MAEA,IAAML,IAAI,GAAG,IAAI,CAACC,GAAG,CAACC,IAAI,CAAC;MAC3B,IAAMQ,KAAK,GAAG,EAAEV,IAAI,YAAYS,QAAQ,CAAC,IAClC,CAAC,IAAI,CAACE,SAAS,CAACX,IAAI,CAAC,IACrB,CAAAA,IAAI,oBAAJA,IAAI,CAAEQ,SAAS,CAAC,CAAC,MAAKH,KAAK,CAACG,SAAS,CAAC,CAAC,GACpCI,UAAA,CAAMC,OAAO,CAACb,IAAI,EAAEK,KAAK,EAAEH,IAAI,CAAC,GAChC,KAAK;MACf,IAAI,CAACY,IAAI,CAACZ,IAAI,EAAEG,KAAK,CAAC;MAEtB,IAAIK,KAAK,EAAE;QACP,IAAI,CAACK,cAAc,CAACL,KAAK,CAAC;MAC9B;MAEA,OAAO,IAAI;IACf,CAAC;IACDI,IAAI,WAAAA,KAACZ,IAAY,EAAEG,KAAU,EAAE;MAC3B,IAAIW,aAAa;QAAEC,MAAM,GAAG,IAAI;MAChC,IAAMC,cAAc,GAAGhB,IAAI,CAACiB,KAAK,CAAC,GAAG,CAAC;MACtC,IAAMC,iBAAiB,GAAGF,cAAc,CAACG,GAAG,CAAC,CAAC;MAC9C,OAAML,aAAa,GAAGE,cAAc,CAACI,KAAK,CAAC,CAAC,EAAE;QAC1C,IAAI,CAACC,WAAA,CAAEC,QAAQ,CAACP,MAAM,CAACD,aAAa,CAAC,CAAC,EAAE;UACpCC,MAAM,CAACD,aAAa,CAAC,GAAG,CAAC,CAAC;QAC9B;QACAC,MAAM,GAAGA,MAAM,CAACD,aAAa,CAAC;MAClC;MACA,IAAIO,WAAA,CAAEE,UAAU,CAACR,MAAM,CAACG,iBAAiB,CAAC,CAAC,EAAE;QACzCH,MAAM,CAACG,iBAAiB,CAAC,CAACf,KAAK,CAAC;MACpC,CAAC,MAAM;QACHY,MAAM,CAACG,iBAAiB,CAAC,GAAGf,KAAK;MACrC;IACJ;EACJ,CAAC,CAAC;EAAA,OAAAV,QAAA;AAAA"}