{"version":3,"file":"dialog-catch-error.js","names":["_dialog","extend","defaults","template","content","title","message","upload","elementConfig","class","_knockout","observable","imports","manager","initObservable","_super","window","addEventListener","DataEvent","Types","NewSessionWithError","onSessionError","bind","event","sessionId","data","show","uploadSession","_this","then","session","uploadSessions","_default"],"sources":["../../ts/js/view/dialog-catch-error.ts"],"sourcesContent":["import Dialog from \"VMPL_BugReplay/js/view/dialog\";\nimport RecorderManager, {DataEvent} from \"VMPL_BugReplay/js/lib/recorder-manager\";\nimport ko from \"knockout\";\n\nexport default Dialog.extend({\n    defaults: {\n        template: 'VMPL_BugReplay/dialog/catch-error',\n        content: {\n            title: 'Error Detected.',\n            message: 'In previos sessions error was caught, the recording was saved on your browser memory.',\n            upload: 'Upload',\n        },\n        elementConfig: {\n            class: ko.observable<string>('message error left-bottom'),\n        },\n        imports: {\n            manager: '${ $.provider }:manager',\n        },\n    },\n    initObservable() {\n        this._super();\n        window.addEventListener(\n            DataEvent.Types.NewSessionWithError,\n            this.onSessionError.bind(this),\n        );\n        return this;\n    },\n    onSessionError(event: DataEvent) {\n        this.sessionId = <number>event.data;\n        this.show(true);\n    },\n    uploadSession() {\n        (<Promise<RecorderManager>>this.manager())\n            .then(manager => {\n                return manager.session(this.sessionId)\n                    .then(session => manager.uploadSessions([session]))\n                    .then(() => this.show(false));\n            })\n    },\n});\n"],"mappings":";;;iBAIeA,OAAA,CAAOC,MAAM,CAAC;IACzBC,QAAQ,EAAE;MACNC,QAAQ,EAAE,mCAAmC;MAC7CC,OAAO,EAAE;QACLC,KAAK,EAAE,iBAAiB;QACxBC,OAAO,EAAE,uFAAuF;QAChGC,MAAM,EAAE;MACZ,CAAC;MACDC,aAAa,EAAE;QACXC,KAAK,EAAEC,SAAA,CAAGC,UAAU,CAAS,2BAA2B;MAC5D,CAAC;MACDC,OAAO,EAAE;QACLC,OAAO,EAAE;MACb;IACJ,CAAC;IACDC,cAAc,WAAAA,eAAA,EAAG;MACb,IAAI,CAACC,MAAM,CAAC,CAAC;MACbC,MAAM,CAACC,gBAAgB,CACnBC,0BAAS,CAACC,KAAK,CAACC,mBAAmB,EACnC,IAAI,CAACC,cAAc,CAACC,IAAI,CAAC,IAAI,CACjC,CAAC;MACD,OAAO,IAAI;IACf,CAAC;IACDD,cAAc,WAAAA,eAACE,KAAgB,EAAE;MAC7B,IAAI,CAACC,SAAS,GAAWD,KAAK,CAACE,IAAI;MACnC,IAAI,CAACC,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IACDC,aAAa,WAAAA,cAAA,EAAG;MAAA,IAAAC,KAAA;MACe,IAAI,CAACf,OAAO,CAAC,CAAC,CACpCgB,IAAI,CAAC,UAAAhB,OAAO,EAAI;QACb,OAAOA,OAAO,CAACiB,OAAO,CAACF,KAAI,CAACJ,SAAS,CAAC,CACjCK,IAAI,CAAC,UAAAC,OAAO;UAAA,OAAIjB,OAAO,CAACkB,cAAc,CAAC,CAACD,OAAO,CAAC,CAAC;QAAA,EAAC,CAClDD,IAAI,CAAC;UAAA,OAAMD,KAAI,CAACF,IAAI,CAAC,KAAK,CAAC;QAAA,EAAC;MACrC,CAAC,CAAC;IACV;EACJ,CAAC,CAAC;EAAA,OAAAM,QAAA;AAAA"}