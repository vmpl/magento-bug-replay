{"version":3,"file":"player.js","names":["_uiComponent","extend","sessionReplay","_sessionReplay","defaults","template","listens","afterRender","element","window","addEventListener","bindPlayer","bind","passive","_data","events","subscribe","lastElementChild","removeChild","width","clientWidth","height","player","rrwebPlayer","target","props","_default"],"sources":["../../ts/js/view/player.ts"],"sourcesContent":["import Component from 'uiComponent';\nimport Data from \"VMPL_BugReplay/js/model/data\";\nimport sessionReplay from 'VMPL_BugReplay/js/action/session-replay';\n\ndeclare var rrwebPlayer: any;\n\nexport default Component.extend({\n    sessionReplay,\n    defaults: {\n        template: 'VMPL_BugReplay/player/rrweb',\n        listens: {\n            '${ $.provider }:activeSession': 'sessionReplay',\n        },\n    },\n    afterRender(element: HTMLDivElement) {\n        if (!this.element) {\n            this.element = element;\n            window.addEventListener(\n                'resize',\n                this.bindPlayer.bind(this),\n                {passive: true},\n            )\n        }\n\n        Data.events.subscribe(this.bindPlayer.bind(this))\n    },\n    bindPlayer() {\n        while (this.element.lastElementChild) {\n            this.element.removeChild(this.element.lastElementChild);\n        }\n\n        const width = this.element.clientWidth;\n        const height = width * 656 / 1024;\n        const events = Data.events();\n\n        this.player = new rrwebPlayer({\n            target: this.element,\n            props: {\n                events,\n                width,\n                height,\n            }\n        })\n    }\n});\n"],"mappings":";;;iBAMeA,YAAA,CAAUC,MAAM,CAAC;IAC5BC,aAAa,EAAAC,cAAA;IACbC,QAAQ,EAAE;MACNC,QAAQ,EAAE,6BAA6B;MACvCC,OAAO,EAAE;QACL,+BAA+B,EAAE;MACrC;IACJ,CAAC;IACDC,WAAW,WAAAA,YAACC,OAAuB,EAAE;MACjC,IAAI,CAAC,IAAI,CAACA,OAAO,EAAE;QACf,IAAI,CAACA,OAAO,GAAGA,OAAO;QACtBC,MAAM,CAACC,gBAAgB,CACnB,QAAQ,EACR,IAAI,CAACC,UAAU,CAACC,IAAI,CAAC,IAAI,CAAC,EAC1B;UAACC,OAAO,EAAE;QAAI,CAClB,CAAC;MACL;MAEAC,KAAA,CAAKC,MAAM,CAACC,SAAS,CAAC,IAAI,CAACL,UAAU,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;IACrD,CAAC;IACDD,UAAU,WAAAA,WAAA,EAAG;MACT,OAAO,IAAI,CAACH,OAAO,CAACS,gBAAgB,EAAE;QAClC,IAAI,CAACT,OAAO,CAACU,WAAW,CAAC,IAAI,CAACV,OAAO,CAACS,gBAAgB,CAAC;MAC3D;MAEA,IAAME,KAAK,GAAG,IAAI,CAACX,OAAO,CAACY,WAAW;MACtC,IAAMC,MAAM,GAAGF,KAAK,GAAG,GAAG,GAAG,IAAI;MACjC,IAAMJ,MAAM,GAAGD,KAAA,CAAKC,MAAM,CAAC,CAAC;MAE5B,IAAI,CAACO,MAAM,GAAG,IAAIC,WAAW,CAAC;QAC1BC,MAAM,EAAE,IAAI,CAAChB,OAAO;QACpBiB,KAAK,EAAE;UACHV,MAAM,EAANA,MAAM;UACNI,KAAK,EAALA,KAAK;UACLE,MAAM,EAANA;QACJ;MACJ,CAAC,CAAC;IACN;EACJ,CAAC,CAAC;EAAA,OAAAK,QAAA;AAAA"}