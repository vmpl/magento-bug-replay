{"version":3,"file":"runner.js","names":["Runner","manager","_proto","prototype","execute","startRecord","exposeDemoActions","_this","range","from","to","i","push","window","demo","getSessionRecords","paginator","forEach","item","console","log","goForPage","value","page","addFilterWithTitle","title","filter","PaginatorFilter","getTwoFirstSessionEvents","Promise","all","map","it","fetch","then","sessions","getEventsForSessionAt","events","uploadSessions","deleteFirstSession","deleteAt","deleteAllSessions","index","runner","_recorderManager","init","_default"],"sources":["../ts/js/runner.ts"],"sourcesContent":["import RecorderManager from \"VMPL_BugReplay/js/lib/recorder-manager\";\nimport {PaginatorFilter} from \"VMPL_BugReplay/js/lib/items-paginator\";\n\nclass Runner {\n    constructor(\n        protected readonly manager: RecorderManager\n    ) {\n    }\n\n    execute(): void {\n        this.manager.startRecord();\n        this.exposeDemoActions();\n    }\n\n    exposeDemoActions(): void {\n        const range = (from: number, to: number) => {\n            const range = [];\n            for (let i = from; i < to; i++) {\n                range.push(i);\n            }\n            return range;\n        }\n\n        // @ts-ignore\n        window.demo = {\n            startRecord: () => {\n                this.manager.startRecord()\n            },\n            getSessionRecords: () => {\n                this.manager.paginator.forEach((item) => {\n                    console.log(item)\n                });\n            },\n            goForPage: (value: number) => (this.manager.paginator.page = value),\n            addFilterWithTitle: (title: string = 'Jackets - Tops - Women') => {\n                this.manager.paginator.filter = new PaginatorFilter('title', title);\n            },\n            getTwoFirstSessionEvents: (from: number = 0, to: number = 2) => {\n                Promise.all(range(from, to).map(it => this.manager.paginator.fetch(it)))\n                    .then(sessions => this.manager.getEventsForSessionAt(sessions))\n                    .then(events => console.log(events))\n            },\n            uploadSessions: () => {\n                this.manager.paginator.all()\n                    .then(sessions => {\n                        return this.manager.uploadSessions(sessions);\n                    })\n                    .then(() => console.log('finished'));\n            },\n            deleteFirstSession: () => {\n                this.manager.deleteAt(0)\n                    .then(() => console.log('deleted'));\n            },\n            deleteAllSessions: () => {\n                this.manager.paginator.forEach((item, index) => {\n                    this.manager.deleteAt(index);\n                })\n                    .then(() => console.log('deletedAll'))\n            }\n        }\n    }\n}\nconst runner = RecorderManager.init('/vmpl-bug-report/worker/loader')\n    .then(manager => new Runner(manager));\nexport default runner;\n"],"mappings":"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"}